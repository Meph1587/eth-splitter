# Eth Splitter

## Development

### Install dependencies

```sh
yarn
```

### Compile typescript, contracts, and generate typechain wrappers

```sh
yarn build
```

### Run tests

```sh
yarn test
```

### Run coverage

```sh
yarn coverage
```

### Environment Setup

Copy `.env.example` to `.env` and fill in fields

### Commands

```sh
# compiling
npx hardhat compile

# deploying
yarn deploy --network rinkeby

# verifying on etherscan
npx hardhat verify --network rinkeby {DEPLOYED_ADDRESS}

# replace `rinkeby` with `mainnet` to productionize
```

### Gas Costs

```shell
·-----------------------------------------------|----------------------------|-------------|-----------------------------·
|              Solc version: 0.8.7              ·  Optimizer enabled: false  ·  Runs: 300  ·  Block limit: 30000000 gas  │
················································|····························|·············|······························
|  Methods                                                                                                               │
····························|···················|··············|·············|·············|···············|··············
|  Contract                 ·  Method           ·  Min         ·  Max        ·  Avg        ·  # calls      ·  eur (avg)  │
····························|···················|··············|·············|·············|···············|··············
|  EthSplitter              ·  distributeERC20  ·           -  ·          -  ·     125758  ·            1  ·          -  │
····························|···················|··············|·············|·············|···············|··············
|  EthSplitter              ·  distributeETH    ·           -  ·          -  ·      57063  ·            1  ·          -  │
····························|···················|··············|·············|·············|···············|··············
|  EthSplitter              ·  updateShares     ·           -  ·          -  ·      47501  ·            2  ·          -  │
····························|···················|··············|·············|·············|···············|··············
|  GnosisSafeReceiverProxy  ·  forward          ·       65776  ·      94376  ·      84843  ·            3  ·          -  │
····························|···················|··············|·············|·············|···············|··············
|  GnosisSafeReceiverProxy  ·  updateSafe       ·           -  ·          -  ·      29194  ·            1  ·          -  │
····························|···················|··············|·············|·············|···············|··············
|  GnosisSafeReceiverProxy  ·  withdraw         ·           -  ·          -  ·      82908  ·            1  ·          -  │
····························|···················|··············|·············|·············|···············|··············
|  WETHMock                 ·  mint             ·       69329  ·      69341  ·      69335  ·            2  ·          -  │
····························|···················|··············|·············|·············|···············|··············
|  Deployments                                  ·                                          ·  % of limit   ·             │
················································|··············|·············|·············|···············|··············
|  EthSplitter                                  ·           -  ·          -  ·    1276347  ·        4.3 %  ·          -  │
················································|··············|·············|·············|···············|··············
|  GnosisSafeReceiverProxy                      ·           -  ·          -  ·     806999  ·        2.7 %  ·          -  │
················································|··············|·············|·············|···············|··············
|  WETHMock                                     ·           -  ·          -  ·    1597008  ·        5.3 %  ·          -  │
·-----------------------------------------------|--------------|-------------|-------------|---------------|-------------·
```

### Coverage

```shell
------------------------------|----------|----------|----------|----------|----------------|
File                          |  % Stmts | % Branch |  % Funcs |  % Lines |Uncovered Lines |
------------------------------|----------|----------|----------|----------|----------------|
 contracts/                   |      100 |       50 |      100 |      100 |                |
  EthSplitter.sol             |      100 |       50 |      100 |      100 |                |
  GnosisSafeReceiverProxy.sol |      100 |       50 |      100 |      100 |                |
 contracts/interfaces/        |      100 |      100 |      100 |      100 |                |
  weth.sol                    |      100 |      100 |      100 |      100 |                |
------------------------------|----------|----------|----------|----------|----------------|
All files                     |      100 |       50 |      100 |      100 |                |
------------------------------|----------|----------|----------|----------|----------------|
```
